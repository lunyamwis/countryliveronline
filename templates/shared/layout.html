<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}ShambaOps{% endblock %}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root { --sidebar-w: 290px; }
    body { overflow-x: hidden; }
    .sidebar {
      width: var(--sidebar-w);
      min-height: 100vh;
      position: sticky;
      top: 0;
    }
    .content-wrap { min-width: 0; }
    .nav-section { font-size: .75rem; letter-spacing: .08em; text-transform: uppercase; }
    .nav-pills .nav-link { border-radius: 12px; }
    .nav-pills .nav-link.active { background: #198754; }
    .brand-badge { letter-spacing: .12em; font-size: .68rem; }
  </style>
</head>

<body class="bg-light">
<div class="d-flex">
  <!-- Sidebar -->
  <aside class="sidebar bg-white border-end">
    <div class="p-3">
      <div class="d-flex align-items-center justify-content-between">
        <a href="/" class="text-decoration-none">
          <div class="fw-bold fs-5 text-success">ShambaOps</div>
          <div class="text-muted brand-badge">COUNTRY LIVING • KENYA</div>
        </a>
        <span class="badge text-bg-success">v1</span>
      </div>

      <hr class="my-3">

      <div class="small text-muted mb-2">Quick</div>
      <div class="d-grid gap-2 mb-3">
        <a class="btn btn-success" href="/">Dashboard</a>
        <a class="btn btn-outline-secondary" href="/admin/">Admin</a>
      </div>

      <div class="nav-section text-muted mb-2">Operations</div>
      <ul class="nav nav-pills flex-column gap-1 mb-3">
        <li class="nav-item"><a class="nav-link" href="/organic/">Organic Farming</a></li>
        <li class="nav-item"><a class="nav-link" href="/poultry/">Poultry</a></li>
        <li class="nav-item"><a class="nav-link" href="/propagation/">Seed Propagation</a></li>
        <li class="nav-item"><a class="nav-link" href="/nursery/">Nursery</a></li>
        <li class="nav-item"><a class="nav-link" href="/kitchen/">Kitchen Garden</a></li>
        <li class="nav-item"><a class="nav-link" href="/landscaping/">Landscaping</a></li>
        <li class="nav-item"><a class="nav-link" href="/beekeeping/">Beekeeping</a></li>
      </ul>

      <div class="nav-section text-muted mb-2">Reliability</div>
      <ul class="nav nav-pills flex-column gap-1 mb-3">
        <li class="nav-item"><a class="nav-link" href="/repairs/">Repairs</a></li>
        <li class="nav-item"><a class="nav-link" href="/maintenance/">Preventive Maintenance</a></li>
        <li class="nav-item"><a class="nav-link" href="/inventory/">Inventory</a></li>
        <li class="nav-item"><a class="nav-link" href="/finance/">Finance</a></li>
      </ul>

      <div class="nav-section text-muted mb-2">Master Data</div>
      <ul class="nav nav-pills flex-column gap-1">
        <li class="nav-item"><a class="nav-link" href="/core/locations/">Locations</a></li>
        <li class="nav-item"><a class="nav-link" href="/core/people/">People</a></li>
        <li class="nav-item"><a class="nav-link" href="/core/suppliers/">Suppliers</a></li>
        <li class="nav-item"><a class="nav-link" href="/core/assets/">Assets</a></li>
        <li class="nav-item"><a class="nav-link" href="/core/tasks/">Tasks</a></li>
      </ul>

      <hr class="my-3">
      <div class="small text-muted">
        {% if request.user.is_authenticated %}
          Logged in as <strong>{{ request.user.username }}</strong>.
          <div><a href="/accounts/logout/">Logout</a></div>
        {% else %}
          <a href="/accounts/login/">Login</a>
        {% endif %}
      </div>
    </div>
  </aside>

  <!-- Main content -->
  <div class="content-wrap flex-grow-1">
    <header class="py-4">
      <div class="container-fluid px-3">
        <div class="bg-white border rounded-4 shadow-sm p-3 p-md-4">
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2">
            <div>
              <div class="text-success fw-semibold small mb-1">{% block eyebrow %}Operations{% endblock %}</div>
              <h1 class="h4 fw-bold mb-1">{% block page_title %}Dashboard{% endblock %}</h1>
              <div class="text-muted">{% block page_subtitle %}{% endblock %}</div>
            </div>
            <div class="d-flex gap-2 flex-wrap">
              {% block header_actions %}{% endblock %}
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="pb-5">
      <div class="container-fluid px-3">
        {% if messages %}
          {% for m in messages %}
            <div class="alert alert-{{ m.tags }} shadow-sm">{{ m }}</div>
          {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
      </div>
    </main>

    <footer class="border-top bg-white py-4">
      <div class="container-fluid px-3 small text-muted">
        © {% now "Y" %} ShambaOps — Django + Bootstrap
      </div>
    </footer>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
